<div th:fragment="content">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;500;600;700&display=swap" rel="stylesheet">

    <div id="biodata-preview"
         class="mx-auto bg-white relative shadow-2xl overflow-hidden"
         style="width: 1033px; height: 1540px; font-family: 'Noto Sans Devanagari', sans-serif; color: #333;"
         th:style="'background-image:url(' + @{${template.emptyTemplateLocation}} + '); background-size: 100% 100%; width: 1033px; height: 1540px; font-family: \'Noto Sans Devanagari\', sans-serif;'">

        <div th:if="${!isPaid}"
             style="position:absolute; inset:0; display:flex; justify-content:center; align-items:center;
             pointer-events:none; z-index:50;">
            <div style="font-size:100px; color:rgba(0,0,0,0.06); transform:rotate(-35deg); font-weight:900; letter-spacing: 5px;">
                Weddingbio.in
            </div>
        </div>

        <div class="absolute inset-0 px-28 pt-4 pb-20 flex flex-col items-center">

            <div class="text-center w-full mb-4">
                <div class="mb-2">
                    <img th:src="@{'/images/gods/' + ${data.godImage} + '.png'}" class="mx-auto h-52 w-auto object-contain"/>
                </div>
                <div class="flex flex-col items-center gap-4">
                    <h2 class="text-[28px] font-bold text-[#7a1f1f] leading-tight" th:text="${data.mantra}">‡•• ‡§∂‡•ç‡§∞‡•Ä ‡§ó‡§£‡•á‡§∂‡§æ‡§Ø ‡§®‡§Æ‡§É ‡••</h2>
                </div>
            </div>
            <div class="w-full flex flex-row gap-10 mt-6">
                <div th:class="${data.profileImagePath != null and data.profileImagePath != ''} ? 'w-[70%] space-y-10' : 'w-full space-y-10'">
                    <section>
                        <h3 class="text-center font-bold text-[28px] mb-6 text-[#7a1f1f] underline underline-offset-8 decoration-2"
                            th:text="#{editor.section.personal}">‡§µ‡•à‡§Ø‡§ï‡•ç‡§§‡§ø‡§ï ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä</h3>

                        <div class="space-y-3 text-[23px] leading-relaxed">
                            <div class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.name}">‡§®‡§æ‡§µ</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-bold text-black" th:text="${data.name}">‡§µ‡•à‡§≠‡§µ ‡§¨‡§æ‡§™‡•Ç‡§∞‡§æ‡§µ ‡§ï‡§≤‡•ç‡§Ø‡§æ‡§£‡§ï‡§∞</div>
                            </div>

                            <div class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.birthDate}">‡§ú‡§®‡•ç‡§Æ ‡§§‡§æ‡§∞‡•Ä‡§ñ</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.birthDate}">18/09/1975</div>
                            </div>

                            <div class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.birthPlace}">‡§ú‡§®‡•ç‡§Æ ‡§∏‡•ç‡§•‡§≥</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.birthPlace}"></div>
                            </div>

                            <div th:if="${data.birthTime != null and !#strings.isEmpty(#strings.trim(data.birthTime))}" class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.birthTime}">‡§ú‡§®‡•ç‡§Æ ‡§∏‡•ç‡§•‡§≥</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.birthTime}"></div>
                            </div>

                            <div th:if="${data.religion != null and !#strings.isEmpty(#strings.trim(data.religion))}" class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.religion}">‡§ß‡§∞‡•ç‡§Æ</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.religion}">‡§π‡§ø‡§Ç‡§¶‡•Ç</div>
                            </div>

                            <div th:if="${data.caste != null and !#strings.isEmpty(#strings.trim(data.caste))}" class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.caste}">‡§ú‡§æ‡§§</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.caste}">‡§ï‡•Å‡§Ç‡§≠‡§æ‡§∞</div>
                            </div>

                            <!-- ================= GOTRA ================= -->
                            <div th:if="${data.gotra != null and !#strings.isEmpty(#strings.trim(data.gotra))}" class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.gotra}">‡§ó‡•ã‡§§‡•ç‡§∞</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.gotra}"></div>
                            </div>

                            <!-- ================= KULDAIVAT ================= -->
                            <div th:if="${data.kuldaivat != null and !#strings.isEmpty(#strings.trim(data.kuldaivat))}" class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.kuldaivat}">‡§ï‡•Å‡§≤‡§¶‡•à‡§µ‡§§</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.kuldaivat}"></div>
                            </div>

                            <!-- ================= RASHI ================= -->
                            <div th:if="${data.rashi != null and !#strings.isEmpty(#strings.trim(data.rashi))}" class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.rashi}">‡§∞‡§æ‡§∂‡•Ä</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.rashi}"></div>
                            </div>

                            <!-- ================= NAKSHATRA ================= -->
                            <div th:if="${data.nakshatra != null and !#strings.isEmpty(#strings.trim(data.nakshatra))}" class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.nakshatra}">‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.nakshatra}"></div>
                            </div>

                            <!-- ================= GAN ================= -->
                            <div th:if="${data.gan != null and !#strings.isEmpty(#strings.trim(data.gan))}" class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.gan}">‡§ó‡§£</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.gan}"></div>
                            </div>

                            <!-- ================= NADI ================= -->
                            <div th:if="${data.nadi != null and !#strings.isEmpty(#strings.trim(data.nadi))}" class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.nadi}">‡§®‡§æ‡§°‡•Ä</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.nadi}"></div>
                            </div>

                            <!-- ================= MANGAL ================= -->
                            <div th:if="${data.mangal != null and !#strings.isEmpty(#strings.trim(data.mangal))}" class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.mangal}">‡§Æ‡§Ç‡§ó‡§≥</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.mangal}"></div>
                            </div>

                            <!-- ================= HEIGHT ================= -->
                            <div th:if="${data.height != null and !#strings.isEmpty(#strings.trim(data.height))}" class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.height}">‡§â‡§Ç‡§ö‡•Ä</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.height}"></div>
                            </div>

                            <!-- ================= COMPLEXION ================= -->
                            <div th:if="${data.complexion != null and !#strings.isEmpty(#strings.trim(data.complexion))}" class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.complexion}">‡§µ‡§∞‡•ç‡§£</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.complexion}"></div>
                            </div>
                            <!-- ================= BLOOD GROUP ================= -->
                            <div th:if="${data.bloodGroup != null and !#strings.isEmpty(#strings.trim(data.bloodGroup))}" class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.bloodGroup}">‡§∞‡§ï‡•ç‡§§‡§ó‡§ü</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.bloodGroup}"></div>
                            </div>

                            <div class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.education}">‡§∂‡§ø‡§ï‡•ç‡§∑‡§£</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.education}"></div>
                            </div>
                            <div th:if="${data.profession != null and !#strings.isEmpty(#strings.trim(data.profession))}" class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.profession}">‡§∂‡§ø‡§ï‡•ç‡§∑‡§£</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.profession}"></div>
                            </div>
                            <!-- ================= INCOME ================= -->
                            <div th:if="${data.income != null and !#strings.isEmpty(#strings.trim(data.income))}" class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.income}">‡§â‡§§‡•ç‡§™‡§®‡•ç‡§®</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.income}"></div>
                            </div>
                        </div>
                    </section>

                    <section>
                        <h3 class="text-center font-bold text-[28px] mb-6 text-[#7a1f1f] underline underline-offset-8 decoration-2"
                            th:text="#{editor.section.family}">‡§ï‡•å‡§ü‡•Å‡§Ç‡§¨‡§ø‡§ï ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä</h3>

                        <div class="space-y-3 text-[23px] leading-relaxed">
                            <div class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.fatherName}">‡§µ‡§°‡§ø‡§≤‡§æ‡§Ç‡§ö‡•á ‡§®‡§æ‡§µ</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.fatherName}"></div>
                            </div>

                            <div class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.motherName}">‡§Ü‡§à‡§ö‡•á ‡§®‡§æ‡§µ</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.motherName}"></div>
                            </div>

                            <div th:if="${data.brothers != null and !#strings.isEmpty(#strings.trim(data.brothers))}" class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.brothers}">‡§≠‡§æ‡§ä</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.brothers}"></div>
                            </div>

                            <div th:if="${data.sisters != null and !#strings.isEmpty(#strings.trim(data.sisters))}" class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.sisters}">‡§¨‡§π‡•Ä‡§£</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.sisters}"></div>
                            </div>

                            <div th:if="${data.relatives != null and !#strings.isEmpty(#strings.trim(data.relatives))}" class="grid grid-cols-12 items-baseline">
                                <div class="col-span-4 font-semibold text-[#555]" th:text="#{editor.form.relatives}">‡§®‡§æ‡§§‡•á‡§µ‡§æ‡§à‡§ï</div>
                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>
                                <div class="col-span-7 font-semibold text-[#222]" th:text="${data.relatives}"></div>
                            </div>

                            <!-- ================= MAMA ================= -->
                            <div th:if="${data.mama != null and !#strings.isEmpty(#strings.trim(data.mama))}"
                                 class="grid grid-cols-12 items-start">

                                <div class="col-span-4 font-semibold text-[#555]"
                                     th:text="#{editor.form.mamaName}">‡§Æ‡§æ‡§Æ‡§æ</div>

                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>

                                <div class="col-span-7 font-semibold text-[#222] flex flex-col leading-relaxed">

                                    <span th:each="m, iterStat : ${#strings.arraySplit(data.mama, ',')}"
                                          th:text="${m}"></span>

                                </div>
                            </div>
                            <!-- ================= KAKA ================= -->
                            <div th:if="${data.kaka != null and !#strings.isEmpty(#strings.trim(data.kaka))}"
                                 class="grid grid-cols-12 items-start">

                                <div class="col-span-4 font-semibold text-[#555]"
                                     th:text="#{editor.form.kakaName}">‡§ï‡§æ‡§ï‡§æ</div>

                                <div class="col-span-1 text-center font-bold text-[#333]">:</div>

                                <div class="col-span-7 font-semibold text-[#222] flex flex-col leading-relaxed">

                                    <span th:each="k, iterStat : ${#strings.arraySplit(data.kaka, ',')}"
                                          th:text="${k}"></span>

                                </div>
                            </div>
                        </div>
                    </section>

                    <section class="mt-8 text-center">

                        <h3 class="font-bold text-[26px] mb-4 text-[#7a1f1f] underline underline-offset-8 decoration-2"
                            th:text="#{editor.section.contact}">
                            ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä
                        </h3>

                        <div class="space-y-2 text-[22px] font-semibold text-[#222] leading-snug">

                            <!-- üìû Mobile -->
                            <div>
                                <span>üìû </span>
                                <span th:text="${isPaid ? data.mobile : '99999 99999'}"></span>
                            </div>

                            <!-- ‚úâÔ∏è Email -->
                            <div th:if="${isPaid ? (data.email != null and !#strings.isEmpty(#strings.trim(data.email))) : true}">
                                <span>‚úâÔ∏è </span>
                                <span th:text="${isPaid ? data.email : 'yourname@weddingbio.in'}"></span>
                            </div>

                            <!-- üìç Address -->
                            <div>
                                <span>üìç </span>
                                <span th:text="${isPaid ? data.address : 'Flat No. 101, Sai Residency, Wakad, Pune'}"></span>
                            </div>

                        </div>

                    </section>

                </div>

                <div class="w-[30%] flex justify-start pt-20"
                     th:if="${data.profileImagePath != null and data.profileImagePath != ''}">
                    <div class="w-56 h-72 border-[8px] border-white shadow-2xl overflow-hidden rounded-sm ring-1 ring-gray-100">
                        <img th:src="@{'/generated/' + ${data.profileImagePath}}" class="object-cover w-full h-full"/>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <style>
        #biodata-preview {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Tightens text rendering to prevent overlapping issues with different fonts */
        .leading-tight {
            line-height: 1.25 !important;
        }
    </style>

</div>