<div th:fragment="content">

    <!-- ================= PREVIEW ================= -->
    <div class="preview-wrapper">
        <div class="preview-scale">

            <!-- template injected here -->
            <div th:replace="~{|templates/${template.id}| :: content}"></div>

        </div>
    </div>

    <!-- ================= ACTION SECTION ================= -->
    <div class="action-buttons">

        <!-- STATUS MESSAGE -->
        <div id="action-status"
             style="width:100%; text-align:center; font-weight:600; color:#444; display:none;">
        </div>

        <!-- ================= BEFORE PAYMENT ================= -->
        <div th:if="${!isPaid}" class="payment-box">

            <!-- ğŸ COUPON -->
            <div class="text-center">
                <div class="text-sm font-semibold text-gray-600 mb-1">
                    ğŸ Have a Coupon?
                </div>

                <div class="flex justify-center items-center gap-2 flex-wrap">
                    <input id="couponInput" type="text"
                           placeholder="Enter coupon code"
                           class="border px-3 py-2 rounded text-center"/>

                    <button onclick="applyCoupon()"
                            class="bg-gray-800 text-white px-4 py-2 rounded">
                        Apply
                    </button>
                </div>

                <!-- coupon message -->
                <div id="couponMsg"
                     class="text-sm mt-2 text-green-600 font-semibold"></div>
            </div>

            <!-- ğŸ’° PRICE -->
            <div class="text-lg font-semibold mt-2 text-center">
                Price:
                <span id="originalPrice" class="price-original hidden">â‚¹49</span>
                <span id="finalPrice" class="price-final">â‚¹49</span>
            </div>

            <!-- ğŸ’³ PAY BUTTON -->
            <button id="payBtn"
                    class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded text-lg font-semibold shadow">
                ğŸ’³ Pay â‚¹49 & Download Instantly
            </button>

            <!-- âœ” BENEFITS -->
            <div class="text-sm text-gray-600 mt-2 text-center space-y-1">
                <div>âœ” High-quality PDF (Print ready)</div>
                <div>âœ” HD Image format</div>
                <div>âœ” WhatsApp sharing ready</div>
                <div>âœ” No watermark after payment</div>
            </div>

            <!-- ğŸ”’ TRUST -->
            <div class="text-xs text-gray-500 text-center mt-2">
                ğŸ”’ 100% Secure payment powered by Razorpay
            </div>

        </div>


        <!-- ================= AFTER PAYMENT ================= -->
        <div th:if="${isPaid}"
             class="flex gap-3 flex-wrap justify-center payment-box">

            <button class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded"
                    onclick="downloadImage()">
                ğŸ“· Download Image
            </button>

            <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded"
                    onclick="downloadPDF()">
                ğŸ“„ Download PDF
            </button>

            <button class="bg-green-700 hover:bg-green-800 text-white px-4 py-2 rounded"
                    onclick="shareOnWhatsApp()">
                ğŸ“² WhatsApp à¤µà¤° à¤ªà¤¾à¤ à¤µà¤¾
            </button>

        </div>

    </div>

    <!-- ================= JS FILES ================= -->
    <script th:src="@{/js/biodata-download.js}"></script>
    <script th:src="@{/js/html-to-image.min.js}"></script>
    <script th:src="@{/js/html2pdf.bundle.min.js}"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script th:src="@{/js/checkout.js}"></script>

</div>