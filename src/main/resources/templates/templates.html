<div th:fragment="content">
     <link rel="stylesheet" th:href="@{/css/templates.css}">

    <!-- ================= HEADER ================= -->
    <section class="bg-gradient-to-r from-red-600 via-pink-600 to-red-500 text-white py-12 md:py-14">
        <div class="max-w-7xl mx-auto px-4 text-center">

            <h1 class="text-3xl md:text-4xl font-bold tracking-wide"
                th:text="#{templates.title}">
                Biodata Templates
            </h1>

            <p class="text-white/90 mt-3 text-sm md:text-base"
               th:text="#{templates.subtitle}">
                Choose a design and start creating instantly
            </p>

        </div>
    </section>


    <section class="bg-white border-b">
        <div class="max-w-7xl mx-auto px-4 py-4 relative">

            <!-- LEFT FADE -->
            <div class="pointer-events-none absolute left-0 top-0 h-full w-6 bg-gradient-to-r from-white to-transparent md:hidden"></div>

            <!-- RIGHT FADE -->
            <div class="pointer-events-none absolute right-0 top-0 h-full w-6 bg-gradient-to-l from-white to-transparent md:hidden"></div>

            <!-- SCROLL WRAPPER -->
            <div class="flex gap-3 overflow-x-auto scroll-smooth px-2 pb-1
                 no-scrollbar md:justify-center">

                <!-- FILTER PILLS -->

                <a th:href="@{/templates}"
                   class="px-4 py-2 rounded-full border text-sm whitespace-nowrap"
                   th:classappend="${selectedReligion == null} ? 'bg-red-600 text-white' : 'bg-white text-gray-700'">
                    <span th:text="#{filter.all}">All</span>
                </a>

                <a th:href="@{/templates(religion='HINDU')}"
                   class="px-4 py-2 rounded-full border text-sm whitespace-nowrap"
                   th:classappend="${selectedReligion == 'HINDU'} ? 'bg-red-600 text-white' : 'bg-white text-gray-700'">
                    <span th:text="#{filter.hindu}">Hindu</span>
                </a>

                <a th:href="@{/templates(religion='BUDDHIST')}"
                   class="px-4 py-2 rounded-full border text-sm whitespace-nowrap"
                   th:classappend="${selectedReligion == 'BUDDHIST'} ? 'bg-red-600 text-white' : 'bg-white text-gray-700'">
                    <span th:text="#{filter.buddhist}">Buddhist</span>
                </a>

                <a th:href="@{/templates(religion='MUSLIM')}"
                   class="px-4 py-2 rounded-full border text-sm whitespace-nowrap"
                   th:classappend="${selectedReligion == 'MUSLIM'} ? 'bg-red-600 text-white' : 'bg-white text-gray-700'">
                    <span th:text="#{filter.muslim}">Muslim</span>
                </a>

                <a th:href="@{/templates(religion='CHRISTIAN')}"
                   class="px-4 py-2 rounded-full border text-sm whitespace-nowrap"
                   th:classappend="${selectedReligion == 'CHRISTIAN'} ? 'bg-red-600 text-white' : 'bg-white text-gray-700'">
                    <span th:text="#{filter.christian}">Christian</span>
                </a>

                <a th:href="@{/templates(religion='JAIN')}"
                   class="px-4 py-2 rounded-full border text-sm whitespace-nowrap"
                   th:classappend="${selectedReligion == 'JAIN'} ? 'bg-red-600 text-white' : 'bg-white text-gray-700'">
                    <span th:text="#{filter.jain}">Jain</span>
                </a>

            </div>
        </div>
    </section>


    <!-- ================= TEMPLATE GRID ================= -->
    <section class="py-10 bg-white">
        <div class="max-w-7xl mx-auto px-4">

            <!-- EMPTY STATE -->
            <div th:if="${#lists.isEmpty(templates)}"
                 class="text-center text-gray-500 py-16">
                <p th:text="#{templates.empty}">
                    No templates available
                </p>
            </div>

            <!-- GRID -->
            <div th:if="${!#lists.isEmpty(templates)}"
                 class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6">

                <!-- TEMPLATE CARD -->
                <div th:each="tpl : ${templates}"
                     class="template-card group relative bg-white rounded-xl border border-gray-100 shadow-sm hover:shadow-xl hover:scale-[1.02] transition p-3 md:p-4 cursor-pointer"
                     th:data-id="${tpl.id}"
                     th:data-img="${tpl.filledTemplateLocation}">

                    <!-- IMAGE WRAPPER -->
                    <div class="h-60 md:h-56 flex items-center justify-center bg-gray-100 rounded-lg overflow-hidden p-3 relative">

                        <!-- ğŸ‘ MOBILE BADGE -->
                        <div class="absolute top-2 right-2 bg-white/90 backdrop-blur
                             text-gray-700 text-[10px] px-2 py-0.5
                             rounded-full shadow md:hidden flex items-center gap-1">
                            ğŸ‘ <span th:text="#{home.templates.view}">View</span>
                        </div>

                        <!-- TEMPLATE IMAGE -->
                        <img th:src="@{${tpl.filledTemplateLocation}}"
                             class="max-h-full object-contain border rounded"/>

                        <!-- ğŸ‘ DESKTOP HOVER OVERLAY -->
                        <div class="absolute inset-0 bg-black/40 flex items-center justify-center
                             opacity-0 pointer-events-none md:group-hover:opacity-100 md:pointer-events-auto transition">

                            <div class="bg-white text-gray-800 px-4 py-2 rounded-lg shadow-md text-sm font-semibold">
                                ğŸ‘ <span th:text="#{home.templates.view}">Preview</span>
                            </div>
                        </div>

                    </div>

                    <!-- USE TEMPLATE BUTTON (independent click) -->
                    <div class="mt-3">
                        <a th:href="@{'/editor/' + ${tpl.id}}"
                           onclick="event.stopPropagation()"
                           class="w-full flex items-center justify-center gap-2
                           bg-red-600 text-white px-4 py-2.5
                           text-sm font-semibold rounded-lg
                           hover:bg-red-700 active:scale-95
                           transition-all shadow-sm">

                            ğŸ“„ <span th:text="#{home.templates.use}">Use Template</span>
                        </a>
                    </div>

                </div>
            </div>

        </div>
    </section>
    <!-- TEMPLATE PREVIEW MODAL -->
    <div id="templateModal"
         class="fixed inset-0 bg-black/50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-xl shadow-2xl p-6 w-[90%] max-w-xl relative">
            <!-- Close -->
            <button onclick="closeTemplateModal()"
                    class="absolute top-3 right-3 text-gray-500 hover:text-red-600 text-xl">
                âœ•
            </button>
            <h3 class="text-lg font-semibold text-center mb-4"
                th:text="#{modal.template.preview}">
                Template Preview
            </h3>
            <img id="templatePreviewImg"
                 class="mx-auto max-h-[70vh] rounded border modal-preview-img"/>
            <div class="text-center mt-5">
                <a id="useTemplateBtn"
                   class="bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-semibold shadow-md"
                   th:text="#{modal.template.use}">
                    Use Template
                </a>
            </div>
        </div>
    </div>
</div>