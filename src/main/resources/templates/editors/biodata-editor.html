<section>

    <!-- Page Title -->
    <h2 class="mb-3 fw-bold"
        th:text="#{editor.title}">
        Customize Biodata
    </h2>

    <!-- Marathi Typing Toggle -->
    <div class="form-check form-switch mb-4">
        <input class="form-check-input"
               type="checkbox"
               id="marathiToggle"
               checked>
        <label class="form-check-label fw-semibold"
               th:text="#{editor.toggle.marathiTyping}">
            Marathi Typing (English â†’ Marathi)
        </label>
        <div class="form-text"
             th:text="#{editor.toggle.hint}">
            Type in English, it will convert to Marathi
        </div>
    </div>

    <div class="row">

        <!-- ================= LEFT : FORM ================= -->
        <div class="col-md-8">

            <form th:action="@{'/editor/' + ${categoryName} + '/preview'}"
                  th:object="${form}"
                  method="post">

                <input type="hidden"
                       name="templateId"
                       th:value="${template.id}">

                <div class="accordion" id="biodataAccordion">

                    <!-- Personal Details -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button"
                                    type="button"
                                    data-bs-toggle="collapse"
                                    data-bs-target="#personalSection"
                                    th:text="#{editor.section.personal}">
                                Personal Details
                            </button>
                        </h2>
                        <div id="personalSection"
                             class="accordion-collapse collapse show">
                            <div class="accordion-body">

                                <div class="mb-3">
                                    <label class="form-label"
                                           th:text="#{editor.form.name}">
                                        Name
                                    </label>
                                    <input type="text"
                                           autocomplete="off"
                                           class="form-control ime-marathi"
                                           th:field="*{name}">
                                </div>

                                <div class="mb-3">
                                    <label class="form-label"
                                           th:text="#{editor.form.birthPlace}">
                                        Birth Place
                                    </label>
                                    <input type="text"
                                           autocomplete="off"
                                           class="form-control ime-marathi"
                                           th:field="*{birthPlace}">
                                </div>

                                <div class="mb-3">
                                    <label class="form-label"
                                           th:text="#{editor.form.religion}">
                                        Religion
                                    </label>
                                    <input type="text"
                                           autocomplete="off"
                                           class="form-control ime-marathi"
                                           th:field="*{religion}">
                                </div>

                                <div class="mb-3">
                                    <label class="form-label"
                                           th:text="#{editor.form.caste}">
                                        Caste
                                    </label>
                                    <input type="text"
                                           autocomplete="off"
                                           class="form-control ime-marathi"
                                           th:field="*{caste}">
                                </div>

                            </div>
                        </div>
                    </div>

                    <!-- Education & Address -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed"
                                    type="button"
                                    data-bs-toggle="collapse"
                                    data-bs-target="#educationSection"
                                    th:text="#{editor.section.education}">
                                Education & Address
                            </button>
                        </h2>
                        <div id="educationSection"
                             class="accordion-collapse collapse">
                            <div class="accordion-body">

                                <div class="mb-3">
                                    <label class="form-label"
                                           th:text="#{editor.form.education}">
                                        Education
                                    </label>
                                    <input type="text"
                                           autocomplete="off"
                                           class="form-control ime-marathi"
                                           th:field="*{education}">
                                </div>

                                <div class="mb-3">
                                    <label class="form-label"
                                           th:text="#{editor.form.address}">
                                        Address
                                    </label>
                                    <textarea class="form-control ime-marathi"
                                              rows="2"
                                              autocomplete="off"
                                              th:field="*{address}">
                                    </textarea>
                                </div>

                            </div>
                        </div>
                    </div>

                    <!-- Contact Details -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed"
                                    type="button"
                                    data-bs-toggle="collapse"
                                    data-bs-target="#contactSection"
                                    th:text="#{editor.section.contact}">
                                Contact Details
                            </button>
                        </h2>
                        <div id="contactSection"
                             class="accordion-collapse collapse">
                            <div class="accordion-body">

                                <div class="mb-3">
                                    <label class="form-label"
                                           th:text="#{editor.form.mobile}">
                                        Mobile Number
                                    </label>
                                    <input type="text"
                                           class="form-control"
                                           autocomplete="off"
                                           th:field="*{mobile}">
                                </div>

                            </div>
                        </div>
                    </div>

                    <!-- Custom Fields -->
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed"
                                    type="button"
                                    data-bs-toggle="collapse"
                                    data-bs-target="#customSection"
                                    th:text="#{editor.section.custom}">
                                Other Information (Custom)
                            </button>
                        </h2>
                        <div id="customSection"
                             class="accordion-collapse collapse">
                            <div class="accordion-body">

                                <div id="customFields"></div>

                                <button type="button"
                                        class="btn btn-sm btn-outline-primary mt-2"
                                        th:text="#{editor.custom.add}"
                                        onclick="addCustomField()">
                                    + Add New Field
                                </button>

                            </div>
                        </div>
                    </div>

                </div>

                <!-- Submit -->
                <button type="submit"
                        class="btn btn-success w-100 mt-4"
                        th:text="#{editor.form.submit}">
                    Generate Biodata
                </button>

            </form>
        </div>

        <!-- ================= RIGHT : SUGGESTIONS ================= -->
        <div class="col-md-4">

            <div id="suggestionBox"
                 class="border rounded p-3 bg-white suggestion-box d-none">

                <h6 class="fw-semibold mb-2"
                    th:text="#{suggestions.title}">
                    Marathi Suggestions
                </h6>

                <div id="suggestionList"
                     class="suggestion-list">
                    <!-- suggestions injected by JS -->
                </div>

                <div class="form-text mt-2"
                     th:text="#{suggestions.hint}">
                    Click a word to replace your current typing
                </div>

            </div>
        </div>

    </div>
</section>
